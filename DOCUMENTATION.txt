================================================================================
            DOCUMENTATION DU PROJET - PORTFOLIO INTERACTIF RAG
================================================================================

Date de crÃ©ation : Janvier 2026
Auteur : Andrea Andreoli
Contexte : BUT Sciences des DonnÃ©es - Niort

================================================================================
1. PRINCIPE GÃ‰NÃ‰RAL DU PROJET
================================================================================

Ce projet est un **portfolio professionnel interactif** basÃ© sur un agent IA
utilisant la technique RAG (Retrieval Augmented Generation).

OBJECTIF :
  Permettre aux visiteurs de poser des questions en langage naturel sur le 
  profil professionnel (compÃ©tences, expÃ©riences, projets) et obtenir des 
  rÃ©ponses prÃ©cises gÃ©nÃ©rÃ©es par une IA.

FONCTIONNEMENT GLOBAL :
  1. Les informations du profil sont stockÃ©es dans des fichiers Markdown (data/)
  2. Ces fichiers sont dÃ©coupÃ©s en morceaux (chunks) et indexÃ©s dans une base
     de donnÃ©es vectorielle (Upstash Vector)
  3. Quand un utilisateur pose une question :
     - L'IA recherche les morceaux de texte pertinents dans la base vectorielle
     - Elle utilise ces informations pour gÃ©nÃ©rer une rÃ©ponse naturelle
     - La rÃ©ponse est affichÃ©e dans une interface Streamlit

TECHNOLOGIES UTILISÃ‰ES :
  - Python 3.12/3.13
  - Streamlit : Interface web conversationnelle
  - OpenAI Agents : Framework pour crÃ©er des agents IA
  - Upstash Vector : Base de donnÃ©es vectorielle (embeddings + recherche hybride)
  - GPT-4.1-nano : ModÃ¨le de langage pour gÃ©nÃ©rer les rÃ©ponses
  - python-dotenv : Gestion des variables d'environnement


================================================================================
2. STRUCTURE DU PROJET
================================================================================

projet-iut-potfolio-main/
â”‚
â”œâ”€â”€ app.py                    # Application Streamlit (interface utilisateur)
â”œâ”€â”€ requirements.txt          # DÃ©pendances Python
â”œâ”€â”€ package.json              # Configuration npm (si applicable)
â”œâ”€â”€ README.md                 # Instructions de mise en place
â”œâ”€â”€ .env                      # Variables d'environnement (secrets)
â”‚
â”œâ”€â”€ data/                     # DonnÃ©es du profil (sources de connaissances)
â”‚   â”œâ”€â”€ profil.md
â”‚   â”œâ”€â”€ competences.md
â”‚   â”œâ”€â”€ experiences.md
â”‚   â””â”€â”€ projets.md
â”‚
â”œâ”€â”€ scripts/                  # Scripts de traitement
â”‚   â”œâ”€â”€ index_upstash.py      # Indexation des donnÃ©es dans Upstash
â”‚   â””â”€â”€ agent_rag.py          # DÃ©finition de l'agent IA avec RAG
â”‚
â”œâ”€â”€ tests/                    # Tests unitaires
â”‚   â”œâ”€â”€ test_openai_agent.py
â”‚   â””â”€â”€ test_upstash_vector.py
â”‚
â””â”€â”€ assets/                   # Ressources (images, etc.)


================================================================================
3. FICHIERS DATA/ - CONTENU DU PORTFOLIO
================================================================================

Le dossier data/ contient les informations du profil professionnel au format
Markdown. Ces fichiers constituent la "base de connaissances" de l'agent.

FICHIERS :

  ğŸ“„ profil.md
     - Nom complet (Andrea Andreoli)
     - Formation (BUT Sciences des DonnÃ©es - Niort)
     - PrÃ©sentation personnelle
     - Centres d'intÃ©rÃªt acadÃ©miques
     - Objectifs professionnels
     - Valeurs et qualitÃ©s

  ğŸ“„ competences.md
     - CompÃ©tences informatiques et data (analyse, stats, programmation)
     - Outils maÃ®trisÃ©s (bureautique, environnements numÃ©riques)
     - CompÃ©tences transversales (rigueur, organisation, travail en Ã©quipe)

  ğŸ“„ experiences.md
     - ExpÃ©riences professionnelles (alternance Ã  la MAAF)
     - Mission principale : CrÃ©ation de fichiers clients avec SQL/SAS pour 
       campagnes marketing
     - Mission secondaire : DÃ©veloppement d'applications VBA
     - Stages
     - Projets universitaires

  ğŸ“„ projets.md
     - Liste des projets acadÃ©miques rÃ©alisÃ©s
     - Projet 1 : Ce chatbot (portfolio interactif)
     - DÃ©tails : objectifs, outils utilisÃ©s, rÃ©sultats

STRUCTURE MARKDOWN :
  - Les fichiers utilisent des titres (# ## ###) pour organiser le contenu
  - Cette structure facilite le dÃ©coupage en sections cohÃ©rentes lors de
    l'indexation
  - Chaque section est indexÃ©e sÃ©parÃ©ment pour amÃ©liorer la prÃ©cision des
    recherches

MODIFICATION DES DONNÃ‰ES :
  Pour mettre Ã  jour le portfolio :
  1. Modifier les fichiers .md dans data/
  2. Relancer le script d'indexation : python scripts/index_upstash.py
  3. L'agent utilisera automatiquement les nouvelles informations


================================================================================
4. SCRIPT : scripts/index_upstash.py
================================================================================

RÃ”LE :
  Ce script lit les fichiers Markdown du dossier data/, les dÃ©coupe en 
  morceaux (chunking), et les envoie dans la base de donnÃ©es vectorielle 
  Upstash pour permettre la recherche sÃ©mantique.

FONCTIONNEMENT DÃ‰TAILLÃ‰ :

  1. CONFIGURATION
     - Charge les variables d'environnement (.env) pour accÃ©der Ã  Upstash
     - DÃ©finit CHUNK_SIZE (taille des morceaux, par dÃ©faut 200 caractÃ¨res)
     - Initialise la connexion Ã  l'index Upstash via Index.from_env()

  2. FONCTION split_by_heading(text)
     - DÃ©coupe le contenu Markdown par sections (lignes commenÃ§ant par #)
     - Chaque titre (# ## ###) crÃ©e une nouvelle section
     - Objectif : prÃ©server la cohÃ©rence sÃ©mantique des informations

  3. FONCTION chunk_text(text)
     - DÃ©coupe d'abord par sections (via split_by_heading)
     - Puis dÃ©coupe chaque section en blocs de CHUNK_SIZE caractÃ¨res
     - DÃ©coupage sans chevauchement (overlap)
     - Retourne une liste de morceaux de texte

  4. BOUCLE D'INDEXATION
     - Parcourt tous les fichiers .md dans data/
     - Pour chaque fichier :
       a) Lit le contenu
       b) DÃ©coupe en chunks
       c) CrÃ©e un objet Vector pour chaque chunk avec :
          - id : nom du fichier + numÃ©ro du vecteur
          - data : le texte du chunk (Upstash gÃ©nÃ¨re automatiquement l'embedding)
          - metadata : source (chemin du fichier) et numÃ©ro du chunk

  5. UPSERT DANS UPSTASH
     - Envoie tous les vecteurs Ã  Upstash via index.upsert()
     - Upstash gÃ©nÃ¨re automatiquement les embeddings vectoriels
     - Affiche le nombre de chunks indexÃ©s

QUAND L'EXÃ‰CUTER :
  - Au premier lancement du projet (pour crÃ©er l'index)
  - AprÃ¨s chaque modification des fichiers dans data/
  - Commande : python scripts/index_upstash.py

CONFIGURATION :
  - NÃ©cessite UPSTASH_VECTOR_REST_URL et UPSTASH_VECTOR_REST_TOKEN dans .env
  - CHUNK_SIZE peut Ãªtre ajustÃ© (trop petit = trop de dÃ©tails, trop grand = 
    perte de prÃ©cision)


================================================================================
5. SCRIPT : scripts/agent_rag.py
================================================================================

RÃ”LE :
  Ce script dÃ©finit l'agent IA qui rÃ©pond aux questions des utilisateurs
  en utilisant la recherche vectorielle (RAG).

FONCTIONNEMENT DÃ‰TAILLÃ‰ :

  1. INITIALISATION
     - Charge les variables d'environnement
     - Initialise la connexion Ã  l'index Upstash Vector

  2. OUTIL : search_index(query)
     - C'est un "function tool" que l'agent peut appeler
     - Prend une requÃªte en entrÃ©e (mot-clÃ© ou phrase de la question)
     - Effectue une recherche vectorielle dans Upstash :
       * Recherche les 5 chunks les plus similaires (top_k=5)
       * Utilise include_metadata et include_data pour rÃ©cupÃ©rer le contenu
     - Retourne les textes des chunks trouvÃ©s, concatÃ©nÃ©s avec double saut de
       ligne (\n\n)
     
     FONCTIONNEMENT DE LA RECHERCHE :
       - L'agent convertit la query en embedding vectoriel
       - Upstash compare ce vecteur avec tous les vecteurs stockÃ©s
       - Retourne les 5 morceaux de texte les plus similaires sÃ©mantiquement

  3. DÃ‰FINITION DE L'AGENT
     - Nom : "Andrea agent"
     - ModÃ¨le : gpt-4.1-nano (modÃ¨le OpenAI)
     - Outils : [search_index] - l'agent peut utiliser cet outil
     - Instructions : 
       * Se prÃ©sente comme Andrea
       * Objectif : rÃ©pondre aux questions sur le profil professionnel
       * Consignes : Ãªtre concis, donner toutes les infos trouvÃ©es, les 
         ordonner par pertinence
       * Peut utiliser search_index pour trouver des informations
       * Ne doit JAMAIS inventer d'informations
       * Si pas de rÃ©ponse trouvÃ©e, dire "je ne sais pas"

  4. TEST
     - Le script contient un test Ã  la fin : pose la question "quels sont tes 
       projets ?"
     - Utile pour vÃ©rifier que tout fonctionne

LOGIQUE RAG (Retrieval Augmented Generation) :
  1. L'utilisateur pose une question
  2. L'agent analyse la question et dÃ©cide d'utiliser search_index
  3. search_index recherche les informations pertinentes dans Upstash
  4. L'agent reÃ§oit ces informations comme contexte
  5. L'agent gÃ©nÃ¨re une rÃ©ponse naturelle basÃ©e sur ce contexte
  6. L'agent NE peut PAS inventer : il se base uniquement sur les infos trouvÃ©es

AVANTAGES DU RAG :
  - RÃ©ponses basÃ©es sur des faits rÃ©els (contenu de data/)
  - Pas d'hallucinations : l'IA ne peut inventer d'informations
  - Facile Ã  mettre Ã  jour : il suffit de modifier data/ et rÃ©indexer


================================================================================
6. FICHIER : app.py - INTERFACE UTILISATEUR
================================================================================

RÃ”LE :
  Application Streamlit qui fournit l'interface web conversationnelle pour
  interagir avec l'agent.

FONCTIONNEMENT DÃ‰TAILLÃ‰ :

  1. IMPORTS ET CONFIGURATION
     - Importe Streamlit pour l'interface
     - Importe Runner pour exÃ©cuter l'agent
     - Charge les variables d'environnement (.env)
     - Importe l'agent depuis scripts/agent_rag.py

  2. CONFIGURATION STREAMLIT (st.set_page_config)
     - Titre de la page : "Andrea Agent"
     - IcÃ´ne : ğŸ¤–
     - Layout : centrÃ©
     - Sidebar : repliÃ©e par dÃ©faut

  3. INTERFACE
     - Titre : "ğŸ’¼ Mon Profil Professionnel"
     - Message d'accueil : invite Ã  poser des questions

  4. GESTION DE L'HISTORIQUE (st.session_state)
     - CrÃ©e une liste "messages" dans la session
     - Stocke tous les messages (utilisateur + assistant)
     - Permet de conserver la conversation lors du rafraÃ®chissement

  5. AFFICHAGE DE L'HISTORIQUE
     - Boucle sur tous les messages prÃ©cÃ©dents
     - Affiche chaque message dans une bulle de chat
     - Distingue visuellement utilisateur et assistant

  6. TRAITEMENT DES NOUVELLES QUESTIONS (st.chat_input)
     - Attend une entrÃ©e utilisateur
     - Quand l'utilisateur envoie une question :
       a) Ajoute le message Ã  l'historique
       b) Affiche le message utilisateur
       c) Lance l'agent avec Runner.run_sync(agent, user_input)
       d) Affiche un spinner pendant le traitement ("Andrea rÃ©flÃ©chit...")
       e) RÃ©cupÃ¨re la rÃ©ponse (result.final_output)
       f) Affiche la rÃ©ponse
       g) Ajoute la rÃ©ponse Ã  l'historique

EXPÃ‰RIENCE UTILISATEUR :
  - Interface de chat moderne et intuitive
  - Historique conservÃ© pendant la session
  - Feedback visuel (spinner) pendant le traitement
  - RÃ©ponses contextuelles grÃ¢ce au RAG

LANCEMENT :
  Commande : streamlit run app.py
  L'application s'ouvre dans le navigateur (gÃ©nÃ©ralement http://localhost:8501)


================================================================================
7. FICHIER .env - VARIABLES D'ENVIRONNEMENT
================================================================================

Contient les clÃ©s API et secrets nÃ©cessaires au fonctionnement :

  UPSTASH_VECTOR_REST_URL=https://...
  UPSTASH_VECTOR_REST_TOKEN=...
  OPENAI_API_KEY=...

IMPORTANT :
  - Ne JAMAIS committer ce fichier sur Git (ajouter dans .gitignore)
  - Utiliser .env.example comme modÃ¨le (sans les vraies valeurs)
  - Chaque dÃ©veloppeur doit crÃ©er son propre .env


================================================================================
8. INSTALLATION ET UTILISATION
================================================================================

PRÃ‰REQUIS :
  - Python 3.12 ou 3.13
  - Compte Upstash avec un index Vector configurÃ©
  - ClÃ© API OpenAI

INSTALLATION :
  1. Cloner le projet
  2. CrÃ©er un environnement virtuel : python -m venv .venv
  3. Activer l'environnement :
     - macOS/Linux : source .venv/bin/activate
     - Windows : .venv\Scripts\activate
  4. Installer les dÃ©pendances : pip install -r requirements.txt
  5. CrÃ©er le fichier .env avec les clÃ©s API
  6. Tester : pytest -s

WORKFLOW :
  1. Modifier les fichiers dans data/ (ajouter expÃ©riences, projets, etc.)
  2. Indexer les donnÃ©es : python scripts/index_upstash.py
  3. Lancer l'application : streamlit run app.py
  4. Tester dans le navigateur

MISE Ã€ JOUR DU CONTENU :
  - Modifier data/*.md
  - Relancer python scripts/index_upstash.py
  - RedÃ©marrer l'app si nÃ©cessaire


================================================================================
9. ARCHITECTURE TECHNIQUE - RÃ‰SUMÃ‰
================================================================================

                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚   UTILISATEUR   â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚ Question
                                   â–¼
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚    app.py       â”‚
                          â”‚   (Streamlit)   â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚  agent_rag.py   â”‚
                          â”‚  (Agent IA)     â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚                 â”‚
                          â–¼                 â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ search_index â”‚   â”‚  GPT-4 nano  â”‚
                  â”‚   (Tool)     â”‚   â”‚   (OpenAI)   â”‚
                  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚   Upstash    â”‚
                  â”‚   Vector DB  â”‚
                  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚   data/*.md  â”‚
                  â”‚  (indexÃ© via â”‚
                  â”‚ index_upstash)â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


FLUX DE DONNÃ‰ES :
  1. L'utilisateur pose une question dans app.py
  2. app.py appelle l'agent dÃ©fini dans agent_rag.py
  3. L'agent utilise le tool search_index pour chercher dans Upstash
  4. Upstash retourne les chunks pertinents (issus de data/)
  5. L'agent envoie la question + contexte Ã  GPT-4
  6. GPT-4 gÃ©nÃ¨re une rÃ©ponse naturelle
  7. L'agent retourne la rÃ©ponse Ã  app.py
  8. app.py affiche la rÃ©ponse Ã  l'utilisateur


================================================================================
10. AMÃ‰LIORATIONS POSSIBLES
================================================================================

  - Ajouter plus de dÃ©tails dans data/ (stages, projets complets)
  - AmÃ©liorer le chunking (overlap, taille dynamique)
  - Ajouter des filtres de recherche (par catÃ©gorie)
  - ImplÃ©menter un historique conversationnel (mÃ©moire de l'agent)
  - Ajouter des graphiques et visualisations
  - DÃ©ploiement en production (Streamlit Cloud, Heroku, etc.)
  - Ajouter des tests plus complets
  - IntÃ©grer d'autres sources de donnÃ©es (LinkedIn, GitHub)


================================================================================
                            FIN DE LA DOCUMENTATION
================================================================================

Pour toute question : andreoli.andrea@example.com (Ã  remplacer)
